- Class: meta
  Course: DataScienceAndR
  Lesson: RDataEngineer-01-Regular-Expression
  Author: Wush Wu
  Type: Standard
  Organization: Taiwan R User Group
  Version: 2.3.1
- Class: text
  Output: 各位同學好，這門課程將會帶大家走過一遍R 裡面提供的字串處理功能。
- Class: text
  Output: 在實務上，數據來源常常都是隱含某些規則的文字檔案。例如：伺服器依據 工程師擬定的規則所產生的資料。這個規則可能是工程師自己訂的，也可能是符合 眾人智慧所訂定的規範。
- Class: text
  Output: 但是不管是工程師自己的想法，或是眾人的智慧，Regular Expression都是 一個能用來從文字中萃取資訊的技術。
- Class: text
  Output: 這個課程中，我們事先從政府的公開資料平台抓取了參與試辦小兒腦性麻痺 的中醫門診的醫療院所。這個資料已經存放於`hospital_path`了
- Class: cmd_question
  Output: 請同學用上一堂課所學的技巧，先用`readBin`來看檢查這個檔案的BOM。
  CorrectAnswer: readBin(hospital_path, "raw", n = 3L)
  AnswerTests: omnitest(correctVal = readBin(hospital_path, "raw", n = 3L))
  Hint: readBin(hospital_path, "raw", n = 3L)
- Class: mult_question
  Output: 請問同學，根據這三個byte，他們的BOM可能是什麼呢？
  AnswerChoices: UTF-8(EF BB BF);UTF-16BE(FE FF);UTF-16LE(FF FE);以上皆非
  CorrectAnswer: 以上皆非
  AnswerTests: omnitest(correctVal = "以上皆非")
  Hint: 請比對R 讀取`hospital_path`前三Byte的值與常見的BOM值
- Class: cmd_question
  Output: 當BOM不能判斷的時候，我們只好用各種Encoding讀個前行試試看。由於政府公開資料網 宣稱這個檔案為UTF-8編碼的，我們先使用UTF-8讀讀看。請同學輸入：
    `readLines(file(hospital_path, encoding = "UTF-8"), n = 6)`
  CorrectAnswer: readLines(file(hospital_path, encoding = "UTF-8"), n = 6)
  AnswerTests: omnitest('readLines(file(hospital_path, encoding = "UTF-8"), n = 6)')
  Hint: readLines(file(hospital_path, encoding = "UTF-8"), n = 6)
- Class: cmd_question
  Output: 接著我們再使用`readLines(file(hospital_path, encoding = "BIG5"), n = 6)` 試試看。同學如果看到一些警告（warning）訊息，是因為這份檔案並非UTF-8編碼，所導致的小錯誤。
  CorrectAnswer: readLines(file(hospital_path, encoding = "BIG5"), n = 6)
  AnswerTests: omnitest('readLines(file(hospital_path, encoding = "BIG5"), n = 6)')
  Hint: readLines(file(hospital_path, encoding = "BIG5"), n = 6)
- Class: mult_question
  Output: 透過上面的測試，請問同學，這個檔案的編碼應該是：
  AnswerChoices: UTF-8;BIG5
  CorrectAnswer: BIG5
  AnswerTests: omnitest(correctVal = "BIG5")
- Class: text
  Output: 像是這類編碼與文件不符的狀況，在實務上是很常見的。
- Class: cmd_question
  Output: 接著請同學依照在RBasic-07所學到的技巧，用`read.table`和`file`兩個函數的組合， 以及適當的設定`sep`、`header`和`encoding`等參數將`hospital_path`的內容存到`hospital`
  CorrectAnswer: hospital <- read.table(file(hospital_path, encoding = "BIG5"), sep
    = ",", header = TRUE)
  AnswerTests: omnitest(correctVal = read.table(file(hospital_path, encoding = "BIG5"),
    sep = ",", header = TRUE))
  Hint: hospital <- read.table(file(hospital_path, encoding = "BIG5"), sep = ",",
    header = TRUE)
- Class: cmd_question
  Output: 我們可能希望從欄位YQ中擷取出資料的年份。我們先看看名稱為YQ這欄，請同學自hospital中選出YQ欄位。 （同學可以使用`[[`、或`$`搭配名稱或是欄位順序）
  CorrectAnswer: hospital$YQ
  AnswerTests: omnitest(correctVal = hospital[[1]])
  Hint: hospital$YQ

